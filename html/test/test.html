<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informations sur les Pays</title>
    <link rel="stylesheet" href="style.css">
    <!-- Lien pour importer la police K2D -->
    <link href="https://fonts.googleapis.com/css2?family=K2D:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

<!-- Header -->
<header>
    <div class="logo-container">
        <h1>Informations sur les Pays</h1>
        <p>Découvrez des informations fascinantes sur les pays du monde entier !</p>
    </div>
</header>

<!-- Menu de navigation sous le header -->
<nav>
    <ul>
        <li><a href="#home">Accueil</a></li>
        <li><a href="#countries-list">Pays</a></li>
        <li><a href="#about">À propos</a></li>
        <li><a href="#contact">Contact</a></li>
        <li><a href="javascript:void(0);" onclick="toggleTestSection()">Test</a></li> <!-- Bouton Test -->
    </ul>
</nav>

<!-- Section des tests (cachée au départ) -->
<section id="tests" style="display: none;">
    <h2>Tests à effectuer</h2>
    <div class="test-buttons">
        <button onclick="outsideTheContinent()">Q1 - Pays avec voisins sur différents continents</button>
        <button onclick="moreNeighbors()">Q2 - Pays avec le plus de voisins</button>
        <button onclick="neighborless()">Q3 - Pays sans voisins</button>
        <button onclick="moreLanguages()">Q4 - Pays avec le plus de langues</button>
        <button onclick="withCommonLanguage()">Q5 - Pays avec voisins parlant une langue commune</button>
        <button onclick="withoutCommonCurrency()">Q6 - Pays sans voisins avec une monnaie commune</button>
        <button onclick="sortingDecreasingDensity()">Q7 - Pays triés par densité de population décroissante</button>
        <button onclick="moreTopLevelDomains()">Q8 - Pays avec plusieurs Top Level Domains</button>
    </div>
</section>

<!-- Liste des pays -->
<div id="countries-list"></div>

<!-- Footer -->
<footer>
    <div class="footer-container">
        <p>&copy; 2025 | Tous droits réservés</p>
        <p>Réalisé avec ❤️ par Valentin, Odin et Joseph</p>
    </div>
</footer>

<!-- Scripts -->
<script src="countries.js"></script>
<script src="Currency.js"></script>
<script src="Language.js"></script>
<script src="Country.js"></script>
<script src="test.js"></script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        if (typeof CurrencyManager !== 'undefined' && typeof LanguageManager !== 'undefined') {

            // Remplir les devises et langues
            CurrencyManager.fill_currencies(countries);
            LanguageManager.fill_languages(countries);
            
            const container = document.getElementById("countries-list");

            countries.forEach(country => {
                let countryDiv = document.createElement("div");
                countryDiv.classList.add("country-card");

                // Récupération des devises 
                let currencies = country.currencies && country.currencies.length > 0 ?
                    country.currencies.map(currency => `${currency.name} (${currency.symbol})`).join(", ") :
                    "Aucune devise";

                // Récupération des langues 
                let languages = country.languages && country.languages.length > 0 ?
                    country.languages.map(language => `${language.name}`).join(", ") :
                    "Aucune langue";

                // Récupération des informations du pays
                let countryInfo = new Country(
                    country.alpha3Code,
                    country.translations.fr || country.name,
                    country.capital,
                    country.region,
                    country.population,
                ).toString();

                countryDiv.innerHTML = `
                    <p><strong>${country.name}</strong></p>
                    <p><span>Capital :</span> ${country.capital || "Inconnu"}</p>
                    <p><span>Région :</span> ${country.region || "Inconnue"}</p>
                    <p><span>Population :</span> ${country.population.toLocaleString() || "Inconnue"}</p>
                    <p><span>Devises :</span> ${currencies}</p>
                    <p><span>Langues :</span> ${languages}</p>
                `;

                container.appendChild(countryDiv);
            });

            console.log("Toutes les informations ont été affichées !");
        } else {
            console.error("CurrencyManager ou LanguageManager non défini.");
        }
    });

    // Fonction pour afficher/masquer la section des tests
    function toggleTestSection() {
        const testSection = document.getElementById('tests');
        if (testSection.style.display === 'none' || testSection.style.display === '') {
            testSection.style.display = 'block'; // Afficher les tests
        } else {
            testSection.style.display = 'none'; // Masquer les tests
        }
    }
</script>

</body>
</html>
